"use strict";(self.webpackChunkadmin_ui=self.webpackChunkadmin_ui||[]).push([[372],{5372:(U,g,l)=>{l.r(g),l.d(g,{GenerateMasterReportModule:()=>I});var u=l(6814),d=l(5628),s=l(95),m=l(9364),e=l(4769),f=l(1521),v=l(788),y=l(2848),R=l(5627);function _(t,n){1&t&&(e.TgZ(0,"p",38),e._uU(1," User Query is required! "),e.qZA())}function x(t,n){if(1&t&&(e.TgZ(0,"div",13)(1,"div",14)(2,"label",35),e._uU(3,"User Query:"),e.TgZ(4,"span",15),e._uU(5,"*"),e.qZA()(),e._UZ(6,"input",36),e.YNc(7,_,2,0,"p",37),e.qZA()()),2&t){const o=e.oxw();e.xp6(7),e.Q6J("ngIf",o.generateForm.controls.userQuery.touched&&o.generateForm.controls.userQuery.hasError("required"))}}function Z(t,n){if(1&t&&(e.TgZ(0,"option",44),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.Q6J("value",o.ID),e.xp6(1),e.hij(" ",o.REPORTNAME," ")}}function b(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",39)(1,"div",14)(2,"label",40),e._uU(3,"Get Master Reports"),e.qZA(),e.TgZ(4,"select",41),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.fetchReports())}),e.TgZ(5,"option",42),e._uU(6,"Select.."),e.qZA(),e.YNc(7,Z,2,2,"option",43),e.qZA()()()}if(2&t){const o=e.oxw();e.xp6(7),e.Q6J("ngForOf",o.reports)}}function C(t,n){1&t&&e._UZ(0,"div",39)}function M(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"app-datatable",45),e.NdJ("search",function(a){e.CHM(o);const i=e.oxw();return e.KtG(i.updateFilter(a))})("changeTemplate",function(a){e.CHM(o);const i=e.oxw();return e.KtG(i.applyTemplate(a))}),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("rows",o.rows)("columns",o.columns)("loadingIndicator",o.loadingIndicator)("selectedTemplateClass",o.selectedTemplateClass)}}const q=[{path:"",component:(()=>{var t;class n{constructor(r,a,i,c,h){this.fb=r,this.httpService=a,this.constant=i,this.dataService=c,this.router=h,this.content=[],this.rows=[],this.columns=[],this.reports=[],this.message="",this.ColumnMode=m.hq,this.SortType=m.ER,this.reorderable=!0,this.loadingIndicator=!0,this.showDataTable=!1,this.selectedTemplateClass="material expanded",this.generateForm=this.fb.group({reportType:["",s.kI.required],userQuery:["",s.kI.required],dataPlainTextRequied:["Y",s.kI.required],ID:["",s.kI.required],queryType:["",s.kI.required]})}generateReport(){const r=this.generateForm.value,a=this.constant.serviceName_GETREPORTSBYFILTER,i={...this.dataService.commonInputData(),[this.constant.key_createdBy]:"1",[this.constant.key_queryType]:r.reportType,[this.constant.key_dataPlainTextRequied]:r.dataPlainTextRequied};let c={};"UserQuery"===r.reportType?c={[this.constant.key_statusId]:"3",[this.constant.key_userQuery]:r.userQuery}:"SystemQuery"===r.reportType&&(c={[this.constant.key_ID]:r.ID});const h={...i,...c};this.httpService.callApiServices(a,h).subscribe({next:p=>{this.responseData=p.responseParameter,this.message="01"==this.responseData.opstatus?p.responseParameter.Result+" Please Check Your SQL Query":p.responseParameter.Result,setTimeout(()=>this.message="",2e3),this.showDataTable="00"==p.responseParameter.opstatus,setTimeout(()=>this.loadingIndicator=!1,1e3),this.content=p.set.records,this.rows=[...this.content],this.columns=Object.keys(this.rows[0]).map(T=>({name:T,prop:T})),console.log(this.rows),console.log(this.columns)},error:p=>this.message="Unable to fetch Data"})}fetchReports(){let r={...this.dataService.commonInputData()};this.httpService.callApiServices(this.constant.serviceName_GETALLREPORTS,r).subscribe({next:i=>{this.reports=i.set.records,console.log(this.reports)}})}applyTemplate(r){this.selectedTemplateClass=r}updateFilter(r){const a=(r||"").toLowerCase();this.rows=a?this.content.filter(i=>Object.values(i).some(c=>(c||"").toLowerCase().includes(a))):this.content}}return(t=n).\u0275fac=function(r){return new(r||t)(e.Y36(s.qu),e.Y36(f.c),e.Y36(v.$),e.Y36(y.D),e.Y36(d.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-generate-master-report"]],decls:58,vars:7,consts:[[1,"main","bg-m"],[1,"right-main-column"],[1,"right-col-container","pad-b","full-width"],[1,"body-page-container","main-dashborad"],[1,"container-fluid"],[1,"row","no-gutters"],[1,"col-12"],[1,"row1"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-12"],[3,"formGroup"],[1,"card","mt-3"],[1,"card-header","bg-primary","text-white"],[1,"card-body","bg-light"],[1,"col-12","col-md-12","col-lg-12","col-xl-12","mt-2"],[1,"ux-input"],[1,"mandatory"],[1,"d-flex","flex-row"],[1,"mr-3"],[1,"ux-selection","form-check"],["type","radio","id","manualQuery","name","reportType","formControlName","reportType","value","UserQuery",1,"form-check-input"],["for","manualQuery",1,"form-check-label","p-0"],["type","radio","id","masterReport","name","reportType","formControlName","reportType","value","SystemQuery",1,"form-check-input"],["for","masterReport",1,"form-check-label","p-0"],["class","col-12 col-md-12 col-lg-12 col-xl-12 mt-2",4,"ngIf"],["class","col-12 col-md-12 col-lg-6 col-xl-6 mt-2",4,"ngIf"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],["type","radio","id","dataRequiredYes","name","dataPlainTextRequied","formControlName","dataPlainTextRequied","value","Y",1,"form-check-input"],["for","dataRequiredYes",1,"form-check-label","p-0"],["type","radio","id","dataRequiredNo","name","dataPlainTextRequied","formControlName","dataPlainTextRequied","value","N",1,"form-check-input"],["for","dataRequiredNo",1,"form-check-label","p-0"],[1,"col-12","col-md-6","col-lg-6","col-xl-6"],["type","button",1,"ux-button","btn","btn-success",3,"click"],[1,"col-12","col-md-6","col-lg-6","col-xl-6","mt-4"],[3,"ngClass"],[3,"rows","columns","loadingIndicator","selectedTemplateClass","search","changeTemplate",4,"ngIf"],["for","userQuery"],["id","userQuery","type","text","formControlName","userQuery","placeholder","User Query","required",""],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"col-12","col-md-12","col-lg-6","col-xl-6","mt-2"],[1,"align-self-center"],["name","ID","formControlName","ID",3,"click"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"rows","columns","loadingIndicator","selectedTemplateClass","search","changeTemplate"]],template:function(r,a){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"form",9)(10,"div",10)(11,"div",11),e._uU(12," Generate Report "),e.qZA(),e.TgZ(13,"div",12)(14,"div",13)(15,"div",14)(16,"label"),e._uU(17,"Report Type:"),e.TgZ(18,"span",15),e._uU(19,"*"),e.qZA()(),e.TgZ(20,"div",16)(21,"div",17)(22,"div",18),e._UZ(23,"input",19),e.TgZ(24,"label",20),e._uU(25,"Manual Query"),e.qZA()()(),e.TgZ(26,"div",17)(27,"div",18),e._UZ(28,"input",21),e.TgZ(29,"label",22),e._uU(30,"Master Report"),e.qZA()()()()()(),e.YNc(31,x,8,1,"div",23),e.YNc(32,b,8,1,"div",24),e.YNc(33,C,1,0,"div",24),e.TgZ(34,"div",25)(35,"div",14)(36,"label"),e._uU(37,"Data in plaintext is required?"),e.TgZ(38,"span",15),e._uU(39,"*"),e.qZA()(),e.TgZ(40,"div",16)(41,"div",17)(42,"div",18),e._UZ(43,"input",26),e.TgZ(44,"label",27),e._uU(45,"Yes"),e.qZA()()(),e.TgZ(46,"div",17)(47,"div",18),e._UZ(48,"input",28),e.TgZ(49,"label",29),e._uU(50,"No"),e.qZA()()()()()(),e.TgZ(51,"div",30)(52,"button",31),e.NdJ("click",function(){return a.generateReport()}),e._uU(53," Fetch "),e.qZA()(),e.TgZ(54,"div",32)(55,"p",33),e._uU(56),e.qZA()()()()(),e.YNc(57,M,1,4,"app-datatable",34),e.qZA()()()()()()()()()),2&r&&(e.xp6(9),e.Q6J("formGroup",a.generateForm),e.xp6(22),e.Q6J("ngIf","UserQuery"===a.generateForm.value.reportType),e.xp6(1),e.Q6J("ngIf","SystemQuery"===a.generateForm.value.reportType),e.xp6(1),e.Q6J("ngIf","multiple"===a.generateForm.value.queryType),e.xp6(22),e.Q6J("ngClass","01"===(null==a.responseData?null:a.responseData.opstatus)?"text-danger":"text-success"),e.xp6(1),e.hij(" ",a.message," "),e.xp6(1),e.Q6J("ngIf",a.showDataTable))},dependencies:[u.mk,u.sg,u.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s._,s.JJ,s.JL,s.Q7,s.sg,s.u,R.n],styles:["ngx-datatable[_ngcontent-%COMP%]{height:25rem}"]}),n})()}];let G=(()=>{var t;class n{}return(t=n).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(q),d.Bz]}),n})();var Q=l(9591);let I=(()=>{var t;class n{}return(t=n).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,G,s.u5,s.UX,m.xD,Q.x]}),n})()}}]);