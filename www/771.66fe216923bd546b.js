"use strict";(self.webpackChunkadmin_ui=self.webpackChunkadmin_ui||[]).push([[771],{5771:(G,_,l)=>{l.r(_),l.d(_,{CreateMasterReportModule:()=>k});var m=l(6814),p=l(5628),r=l(95),d=l(590),v=l(7398),e=l(4769),f=l(1521),T=l(788),h=l(2848),b=l(3058),g=l(5597);function C(t,i){1&t&&(e.TgZ(0,"p",28),e._uU(1," Report Name is required! "),e.qZA())}function x(t,i){if(1&t&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.name),e.xp6(1),e.hij(" ",o.name," ")}}function Z(t,i){if(1&t&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.name),e.xp6(1),e.hij(" ",o.name," ")}}function R(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"label",36),e._uU(3,"Select Table"),e.qZA(),e.TgZ(4,"select",37),e.NdJ("change",function(){e.CHM(o);const a=e.oxw(2);return e.KtG(a.fetchColumns())}),e._UZ(5,"option",31),e.YNc(6,Z,2,2,"option",32),e.qZA()()()}if(2&t){const o=e.oxw(2);e.xp6(6),e.Q6J("ngForOf",o.tables)}}function M(t,i){if(1&t&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.name),e.xp6(1),e.hij(" ",o.name," ")}}function q(t,i){if(1&t&&(e.TgZ(0,"div",38)(1,"div",14)(2,"label",39),e._uU(3,"Select Column"),e.qZA(),e.TgZ(4,"select",40),e.YNc(5,M,2,2,"option",32),e._uU(6," column.name "),e.qZA()()()),2&t){const o=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",o.columns)}}function A(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"label",29),e._uU(4,"Get Databases"),e.qZA(),e.TgZ(5,"select",30),e.NdJ("change",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.fetchTables())}),e.TgZ(6,"option",31),e._uU(7,"Select.."),e.qZA(),e.YNc(8,x,2,2,"option",32),e.qZA()()(),e.YNc(9,R,7,1,"div",33),e.YNc(10,q,7,1,"div",34),e.qZA()}if(2&t){const o=e.oxw();e.xp6(8),e.Q6J("ngForOf",o.databases),e.xp6(1),e.Q6J("ngIf",o.masterReportForm.get("database").value),e.xp6(1),e.Q6J("ngIf",o.masterReportForm.get("tableName").value)}}function N(t,i){if(1&t&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.name),e.xp6(1),e.hij(" ",o.name," ")}}function y(t,i){if(1&t&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.name),e.xp6(1),e.hij(" ",o.name," ")}}function J(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"label",45),e._uU(3,"Select Table"),e.qZA(),e.TgZ(4,"select",46),e.NdJ("change",function(){e.CHM(o);const a=e.oxw(2);return e.KtG(a.fetchColumns())}),e.TgZ(5,"option",31),e._uU(6,"Select.."),e.qZA(),e.YNc(7,y,2,2,"option",32),e.qZA()()()}if(2&t){const o=e.oxw(2);e.xp6(7),e.Q6J("ngForOf",o.tables)}}function U(t,i){if(1&t&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.name),e.xp6(1),e.hij(" ",o.name," ")}}function F(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",47)(1,"div",48)(2,"label",49),e._uU(3,"Select Column"),e.qZA(),e.TgZ(4,"select",50),e.YNc(5,U,2,2,"option",32),e._uU(6," column.name "),e.qZA()(),e.TgZ(7,"div",51)(8,"button",52),e.NdJ("click",function(){e.CHM(o);const a=e.oxw(2);return e.KtG(a.getQueryMultipleTables())}),e._UZ(9,"fa-icon",53),e.qZA()()()}if(2&t){const o=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",o.columns),e.xp6(4),e.Q6J("icon",o.faRotate)}}function I(t,i){if(1&t&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.table_name),e.xp6(1),e.hij(" ",o.table_name," ")}}function S(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",14)(1,"label",54),e._uU(2,"Join Table"),e.qZA(),e.TgZ(3,"select",55),e.NdJ("change",function(){e.CHM(o);const a=e.oxw(2);return e.KtG(a.fetchColumns())}),e.YNc(4,I,2,2,"option",32),e.qZA()()}if(2&t){const o=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",o.joinTables)}}function Q(t,i){if(1&t&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("value",o.column_name),e.xp6(1),e.hij(" ",o.column_name," ")}}function j(t,i){if(1&t&&(e.TgZ(0,"div",47)(1,"div",56)(2,"label",57),e._uU(3,"Select Column"),e.qZA(),e.TgZ(4,"select",58),e.YNc(5,Q,2,2,"option",32),e._uU(6," column.name "),e.qZA()(),e.TgZ(7,"div",59)(8,"button",60),e._uU(9,"Add More Column"),e.qZA()()()),2&t){const o=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",o.joinTables)}}function D(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"label",29),e._uU(4,"Get Databases"),e.qZA(),e.TgZ(5,"select",30),e.NdJ("change",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.fetchTables())}),e.TgZ(6,"option",31),e._uU(7,"Select.."),e.qZA(),e.YNc(8,N,2,2,"option",32),e.qZA()()(),e.YNc(9,J,8,1,"div",33),e.YNc(10,F,10,2,"div",41),e.TgZ(11,"div",13),e.YNc(12,S,5,1,"div",42),e.qZA(),e.YNc(13,j,10,1,"div",41),e.TgZ(14,"div",13)(15,"button",43),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.createMasterReport())}),e._uU(16," Save "),e.qZA(),e.TgZ(17,"p",28),e._uU(18),e.qZA()(),e._UZ(19,"div",44),e.qZA()}if(2&t){const o=e.oxw();e.xp6(8),e.Q6J("ngForOf",o.databases),e.xp6(1),e.Q6J("ngIf",o.masterReportForm.value.database),e.xp6(1),e.Q6J("ngIf",o.masterReportForm.value.multiTable),e.xp6(2),e.Q6J("ngIf",o.masterReportForm.value.multiColumn),e.xp6(1),e.Q6J("ngIf",o.masterReportForm.value.multiColumn),e.xp6(5),e.Oqu(o.errroMessage)}}const E=[{path:"",component:(()=>{var t;class i{constructor(n,a,s,c,u,w){this.fb=n,this.httpService=a,this.constant=s,this.dataService=c,this.router=u,this.storage=w,this.faPlus=d.r8p,this.faRotate=d.go9,this.columnGroups=[],this.databases=[],this.tables=[],this.columns=[],this.joinTables=[],this.isSingleTable=!0,this.errroMessage="",this.masterReportForm=this.fb.group({name:["",r.kI.required],database:["",r.kI.required],tableName:["",r.kI.required],multiTable:["",r.kI.required],joinTable:["",r.kI.required],queryType:["single",r.kI.required],columns:[[],r.kI.required],multiColumn:["",r.kI.required],joinColumn:["",r.kI.required]}),this.fetchDatabases()}addMoreColumn(){const n=this.fb.group({columns:["",r.kI.required]});this.columnGroups.push(n)}toggleTableType(n){this.isSingleTable="single"===n,this.masterReportForm.value.database=""}fetchDatabases(){let n={...this.dataService.commonInputData(),[this.constant.key_requestType]:"getOwners"};this.getDBDetails(n).subscribe(a=>{this.databases=a})}fetchTables(){const n=this.masterReportForm.value;let a={...this.dataService.commonInputData(),[this.constant.key_requestType]:"getTables",[this.constant.key_name]:n.database};this.getDBDetails(a).subscribe(s=>{this.tables=s})}fetchColumns(){const n=this.masterReportForm.value;let a={...this.dataService.commonInputData(),[this.constant.key_requestType]:"getColumns",[this.constant.key_name]:n.tableName||n.multiTable};this.getDBDetails(a).subscribe(s=>{this.columns=s})}getDBDetails(n){return this.httpService.callApiServices(this.constant.serviceName_GETDBDETAILS,n).pipe((0,v.U)(s=>s.set.records))}createMasterReport(){const n=this.masterReportForm.value,a=n.columns.join(",");console.log(a);const s=this.constant.serviceName_CREATEREPORT;let c={...this.dataService.commonInputData(),[this.constant.key_name]:n.name,[this.constant.key_tableName]:n.tableName,[this.constant.key_queryType]:"select",[this.constant.key_columnName]:a};this.httpService.callApiServices(s,c).subscribe({next:u=>{console.log(u),this.dataService.goToPage("generateMasterReport")}})}getQueryMultipleTables(){const n=this.masterReportForm.value,a=this.constant.serviceName_GETQUERYMULTIPLETABLES;let s={...this.dataService.commonInputData(),[this.constant.key_tableName]:n.multiTable,[this.constant.key_ownerName]:n.database,[this.constant.key_columnName]:n.multiColumn};this.httpService.callApiServices(a,s).subscribe({next:c=>{"01"===c.responseParameter.opstatus&&setTimeout(()=>this.errroMessage=this.errroMessage=c.responseParameter.Result,2e3),this.joinTables=c.set.records,console.log(this.joinTables)}})}}return(t=i).\u0275fac=function(n){return new(n||t)(e.Y36(r.qu),e.Y36(f.c),e.Y36(T.$),e.Y36(h.D),e.Y36(p.F0),e.Y36(b.n))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-create-master-report"]],decls:41,vars:4,consts:[[1,"main","bg-m"],[1,"right-main-column"],[1,"right-col-container","pad-b","full-width"],[1,"body-page-container","main-dashborad"],[1,"container-fluid"],[1,"row","no-gutters"],[1,"col-12"],[1,"row1"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-12"],[3,"formGroup"],[1,"card","mt-3"],[1,"card-header","bg-primary","text-white"],[1,"card-body","bg-light"],[1,"col-12","col-md-6","col-lg-6","col-xl-6"],[1,"ux-input"],["for","name"],[1,"mandatory"],["id","name","type","text","formControlName","name","placeholder","Enter Report Name","required",""],["class","text-danger",4,"ngIf"],[1,"col-12","col-md-12","col-lg-12","col-xl-12","mt-2"],[1,"d-flex","flex-row"],[1,"mr-3"],[1,"ux-selection","form-check"],["type","radio","id","table","name","queryType","formControlName","queryType","value","single",1,"form-check-input",3,"change"],["for","table",1,"form-check-label","p-0"],["type","radio","id","masterReport","name","queryType","formControlName","queryType","value","multiple",1,"form-check-input",3,"change"],["for","masterReport",1,"form-check-label","p-0"],[4,"ngIf"],[1,"text-danger"],["for","database",1,"align-self-center"],["name","database","formControlName","database",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","col-12 col-md-6 col-lg-6 col-xl-6",4,"ngIf"],["style","height: 100px","class","col-12 col-md-6 col-lg-6 col-xl-6",4,"ngIf"],[3,"value"],["for","tableName",1,"align-self-center"],["name","tableName","formControlName","tableName",3,"change"],[1,"col-12","col-md-6","col-lg-6","col-xl-6",2,"height","100px"],["for","columns",1,"align-self-center"],["name","columns","formControlName","columns","multiple","",1,"h-75"],["class","col-12 col-md-6 col-lg-6 col-xl-6 d-flex justify-content-between",4,"ngIf"],["class","ux-input",4,"ngIf"],["type","button",1,"ux-button","btn","btn-success",3,"click"],[1,"col-12","col-md-6","col-lg-6","col-xl-6","mt-4"],["for","multiTable",1,"align-self-center"],["name","multiTable","formControlName","multiTable",3,"change"],[1,"col-12","col-md-6","col-lg-6","col-xl-6","d-flex","justify-content-between"],[1,"ux-input","col-8","p-0"],["for","multiColumn",1,"align-self-center"],["name","multiColumn","formControlName","multiColumn"],[1,"col-2","align-self-center","px-0"],[1,"btn","bg-primary","rounded","d-flex",3,"click"],["title","Click to fetch table",3,"icon"],["for","joinTable",1,"align-self-center"],["name","joinTable","formControlName","joinTable",3,"change"],[1,"ux-input","col-lg-3"],["for","joinColumn",1,"align-self-center"],["name","joinColumn","formControlName","joinColumn"],[1,"col-lg-2","align-self-center","mx-4"],[1,"ux-button","btn","btn-primary","rounded"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"form",9)(10,"div",10)(11,"div",11),e._uU(12," Create Master Report "),e.qZA(),e.TgZ(13,"div",12)(14,"div",13)(15,"div",14)(16,"label",15),e._uU(17,"Report Name:"),e.TgZ(18,"span",16),e._uU(19,"*"),e.qZA()(),e._UZ(20,"input",17),e.YNc(21,C,2,0,"p",18),e.qZA()(),e.TgZ(22,"div",19)(23,"div",14)(24,"label"),e._uU(25,"Table Type:"),e.TgZ(26,"span",16),e._uU(27,"*"),e.qZA()(),e.TgZ(28,"div",20)(29,"div",21)(30,"div",22)(31,"input",23),e.NdJ("change",function(){return a.toggleTableType("single")}),e.qZA(),e.TgZ(32,"label",24),e._uU(33,"Single Table"),e.qZA()()(),e.TgZ(34,"div",21)(35,"div",22)(36,"input",25),e.NdJ("change",function(){return a.toggleTableType("multiple")}),e.qZA(),e.TgZ(37,"label",26),e._uU(38,"Multiple Table"),e.qZA()()()()()(),e.YNc(39,A,11,3,"div",27),e.YNc(40,D,20,6,"div",27),e.qZA()()()()()()()()()()()()),2&n&&(e.xp6(9),e.Q6J("formGroup",a.masterReportForm),e.xp6(12),e.Q6J("ngIf",a.masterReportForm.controls.name.touched&&a.masterReportForm.controls.name.hasError("required")),e.xp6(18),e.Q6J("ngIf",a.isSingleTable),e.xp6(1),e.Q6J("ngIf",!a.isSingleTable))},dependencies:[m.sg,m.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.K7,r._,r.JJ,r.JL,r.Q7,r.sg,r.u,g.BN]}),i})()}];let Y=(()=>{var t;class i{}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(E),p.Bz]}),i})(),k=(()=>{var t;class i{}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,Y,r.u5,r.UX,g.uH]}),i})()}}]);