"use strict";(self.webpackChunkadmin_ui=self.webpackChunkadmin_ui||[]).push([[220],{9220:(H,f,l)=>{l.r(f),l.d(f,{CreatePageVersionsModule:()=>R});var d=l(6814),v=l(5628),g=l(1717),a=l(95),h=l(590),e=l(4769),P=l(788),x=l(2848),E=l(1521),T=l(3058),N=l(9831),m=l(6304),C=l(5597);function A(t,s){if(1&t&&(e.TgZ(0,"ng-option",24),e._uU(1),e.qZA()),2&t){const n=s.$implicit;e.Q6J("value",n.PAGENAME),e.xp6(1),e.hij(" ",n.PAGENAME,"")}}function Z(t,s){1&t&&(e.TgZ(0,"p",25),e._uU(1," Page Name is required! "),e.qZA())}function b(t,s){if(1&t&&(e.TgZ(0,"div",18)(1,"div",19)(2,"label",20),e._uU(3,"Enter Page Name"),e.qZA(),e.TgZ(4,"ng-select",21),e.YNc(5,A,2,2,"ng-option",22),e.qZA(),e.YNc(6,Z,2,0,"p",23),e.qZA()()),2&t){const n=e.oxw();e.xp6(5),e.Q6J("ngForOf",n.pages),e.xp6(1),e.Q6J("ngIf",n.pageVersionForm.controls.pageName.touched&&n.pageVersionForm.controls.pageName.hasError("required"))}}function y(t,s){1&t&&(e.TgZ(0,"p",25),e._uU(1," Page Name is required! "),e.qZA())}function D(t,s){1&t&&(e.TgZ(0,"p",25),e._uU(1," Page Description is required! "),e.qZA())}function I(t,s){if(1&t&&(e.TgZ(0,"div",37)(1,"div",38),e._UZ(2,"input",39),e.TgZ(3,"label",40),e._uU(4),e.ALo(5,"titlecase"),e.qZA()()()),2&t){const n=s.$implicit;e.xp6(2),e.Q6J("value",n.charAt(0).toUpperCase()),e.xp6(1),e.Q6J("for",n),e.xp6(1),e.Oqu(e.lcZ(5,3,n))}}function V(t,s){if(1&t&&(e.TgZ(0,"ng-option",24),e._uU(1),e.qZA()),2&t){const n=s.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(n.text)}}function O(t,s){1&t&&(e.TgZ(0,"p",25),e._uU(1," Element Type is required! "),e.qZA())}function M(t,s){if(1&t&&(e.TgZ(0,"ng-option",24),e._uU(1),e.qZA()),2&t){const n=s.$implicit;e.Q6J("value",n.DESCRIPTION),e.xp6(1),e.Oqu(n.DROPDOWNNAME)}}function F(t,s){1&t&&(e.TgZ(0,"p",25),e._uU(1," Element Name is required! "),e.qZA())}function q(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div")(1,"div",18)(2,"div",19)(3,"label",26),e._uU(4,"Page Name "),e.TgZ(5,"span",27),e._uU(6,"*"),e.qZA()(),e._UZ(7,"input",28),e.YNc(8,y,2,0,"p",23),e.qZA()(),e.TgZ(9,"div",18)(10,"div",19)(11,"label",29),e._uU(12,"Description:"),e.TgZ(13,"span",27),e._uU(14,"*"),e.qZA()(),e._UZ(15,"textarea",30),e.YNc(16,D,2,0,"p",23),e.qZA()(),e.TgZ(17,"div",18)(18,"div",19)(19,"label"),e._uU(20,"Encryption Standard:"),e.TgZ(21,"span",27),e._uU(22,"*"),e.qZA()(),e.TgZ(23,"div",31),e.YNc(24,I,6,5,"div",32),e.qZA()()(),e.TgZ(25,"div",18)(26,"div",19)(27,"label",33),e._uU(28,"Element Type:"),e.TgZ(29,"span",27),e._uU(30,"*"),e.qZA()(),e.TgZ(31,"ng-select",34),e.NdJ("blur",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.getDropDown())}),e.YNc(32,V,2,2,"ng-option",22),e.qZA(),e.YNc(33,O,2,0,"p",23),e.qZA()(),e.TgZ(34,"div",18)(35,"div",19)(36,"label",35),e._uU(37,"Element Name List"),e.qZA(),e.TgZ(38,"ng-select",36),e.YNc(39,M,2,2,"ng-option",22),e.qZA(),e.YNc(40,F,2,0,"p",23),e.qZA()()()}if(2&t){const n=e.oxw();e.xp6(8),e.Q6J("ngIf",n.pageVersionForm.controls.newPageName.touched&&n.pageVersionForm.controls.newPageName.hasError("required")),e.xp6(8),e.Q6J("ngIf",n.pageVersionForm.controls.pageDescription.touched&&n.pageVersionForm.controls.pageDescription.hasError("required")),e.xp6(8),e.Q6J("ngForOf",n.encryption),e.xp6(8),e.Q6J("ngForOf",n.types),e.xp6(1),e.Q6J("ngIf",n.pageVersionForm.controls.type.touched&&n.pageVersionForm.controls.type.hasError("required")),e.xp6(6),e.Q6J("ngForOf",n.elements),e.xp6(1),e.Q6J("ngIf",n.pageVersionForm.controls.selectedElement.touched&&n.pageVersionForm.controls.selectedElement.hasError("required"))}}function S(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.searchPage())}),e._uU(1," Search "),e.qZA()}}function k(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.addElement())}),e._uU(1," Add "),e.qZA()}}function J(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",47)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"div",48),e._UZ(4,"fa-icon",49),e.TgZ(5,"fa-icon",50),e.NdJ("click",function(){const r=e.CHM(n).$implicit,c=e.oxw(2);return e.KtG(c.deleteElement(r))}),e.qZA()()()}if(2&t){const n=s.$implicit,o=e.oxw(2);e.xp6(2),e.Oqu(n.DESCRIPTION),e.xp6(2),e.Q6J("icon",o.faGripHorizontal),e.xp6(1),e.Q6J("icon",o.faClose)}}function U(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",14)(1,"button",41),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.showAddElement=!0)}),e._uU(2," Add Elements "),e.qZA()()}}function w(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",14)(1,"button",41),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.createPageElements())}),e._uU(2," Save "),e.qZA()()}}function Y(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",42)(1,"div",10),e._uU(2,"Selected Elements"),e.qZA(),e.TgZ(3,"div",11)(4,"div",43)(5,"div",44),e.NdJ("cdkDropListDropped",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.drop(i))}),e.YNc(6,J,6,3,"div",45),e.qZA()(),e.YNc(7,U,3,0,"div",46),e.YNc(8,w,3,0,"div",46),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(5),e.Q6J("cdkDropListData",n.selectedElements),e.xp6(1),e.Q6J("ngForOf",n.selectedElements),e.xp6(1),e.Q6J("ngIf",!n.showAddElement),e.xp6(1),e.Q6J("ngIf",n.showAddElement)}}const Q=[{path:"",component:(()=>{var t;class s{constructor(o,i,r,c,p,u,_){this.constant=o,this.dataService=i,this.httpService=r,this.storage=c,this.datePipe=p,this.commonMethod=u,this.fb=_,this.faGripHorizontal=h.BUU,this.faClose=h.YIN,this.today="",this.error="",this.showAddElement=!1,this.isPageCreated=!1,this.pages=[],this.selectedElements=[],this.elements=[],this.errorMessage="",this.pageId="",this.encryption=["static","dynamic","rsa"],this.types=this.constant.typeOptions}ngOnInit(){this.initForm(),this.fetchPagesCreated(),this.today=this.datePipe.transform(new Date,"dd-MM-yyyy")}initForm(){this.pageVersionForm=this.fb.group({pageName:["",a.kI.required],newPageName:["",a.kI.required],pageDescription:["",a.kI.required],isEncrypted:["S",a.kI.required],type:["",a.kI.required],selectedElement:["",a.kI.required]}),this.pageVersionForm.get("pageName").valueChanges.subscribe(o=>{null!=o&&this.pageVersionForm.get("newPageName").setValue(o+this.today)})}fetchPagesCreated(){this.httpService.callApiServices(this.constant.serviceName_GETPAGESCREATED,this.dataService.commonInputData()).subscribe(o=>this.pages=o.set.records)}addElement(){const o=this.pageVersionForm.value,i=o.selectedElement;i&&!this.selectedElements.find(r=>r.DESCRIPTION===i)?.DESCRIPTION&&(this.selectedElements=[...this.selectedElements,this.elements.find(r=>r.DESCRIPTION===i)],o.selectedElement=""),this.createPage()}deleteElement(o){const i=this.selectedElements.findIndex(r=>r.ID===o.ID);-1!==i&&this.selectedElements.splice(i,1)}drop(o){(0,g.bA)(o.container.data,o.previousIndex,o.currentIndex)}getDropDown(){const o=this.pageVersionForm.value,i={...this.dataService.commonInputData(),[this.constant.key_type]:o.type};this.httpService.callApiServices(this.constant.serviceName_GETDROPDOWN,i).subscribe(c=>{const p=c.responseParameter;"01"===p.opstatus&&(this.error=p.Result),this.elements=c.set.records})}searchPage(){const o=this.pageVersionForm.value,i={...this.dataService.commonInputData(),[this.constant.key_pageName]:o.pageName};this.httpService.callApiServices(this.constant.serviceName_GETDYNAMICPAGE,i).subscribe(c=>this.selectedElements=c.set.records)}createPage(){const o=this.pageVersionForm.value,i={...this.dataService.commonInputData(),[this.constant.key_pageName]:o.newPageName,[this.constant.key_DESCRIPTION]:o.pageDescription,[this.constant.key_isEncrypted]:o.isEncrypted};this.isPageCreated||this.httpService.callApiServices(this.constant.serviceName_CREATEPAGE,i).subscribe(c=>{const p=c.responseParameter;console.log(p),this.errorMessage=p.Result,this.pageId=p.ID,this.isPageCreated=!0})}createPageElements(){const o=this.selectedElements.map((c,p)=>[(p+1).toString(),c.DROPDOWNNAME||c.LABELNAME,c.ID,c.DESCRIPTION].join("#")).join("~"),i={...this.dataService.commonInputData(),[this.constant.key_ID]:this.pageId,[this.constant.key_value]:o};this.httpService.callApiServices(this.constant.serviceName_CREATEPAGEELEMENTS,i).subscribe(c=>{const p=c.responseParameter;"00"===p.opstatus?(this.dataService.information="Page Version Created Successfully",this.commonMethod.openPopup("div.popup-bottom.success-popup"),setTimeout(()=>{this.dataService.goToPage("getsavedData")},2e3)):(this.dataService.information="Unable to Create Page Version",this.dataService.informationLabel=p.Result,this.commonMethod.openPopup("div.popup-bottom.error-popup"))}),this.pageVersionForm.reset()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(P.$),e.Y36(x.D),e.Y36(E.c),e.Y36(T.n),e.Y36(d.uU),e.Y36(N.v),e.Y36(a.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-create-page-versions"]],decls:23,vars:7,consts:[[1,"main","bg-m"],[1,"right-main-column"],[1,"right-col-container","pad-b","full-width"],[1,"body-page-container","main-dashborad"],[1,"container-fluid"],[1,"row","no-gutters"],[1,"col-12"],[1,"row1"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-12"],[1,"card","mt-3",3,"formGroup"],[1,"card-header","bg-primary","text-white"],[1,"card-body"],["class","col-12 col-md-6 col-lg-6 col-xl-6",4,"ngIf"],[4,"ngIf"],[1,"col-md-6","col-lg-4","col-xl-4","col-12"],["class","ux-button","type","button",3,"click",4,"ngIf"],[1,"text-success"],["class","card mt-3",4,"ngIf"],[1,"col-12","col-md-6","col-lg-6","col-xl-6"],[1,"ux-input"],["for","pagename"],["labelForId","pageName","name","pageName","formControlName","pageName"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[3,"value"],[1,"text-danger"],["for","newPageName"],[1,"mandatory"],["type","text","formControlName","newPageName"],["for","description"],["id","description","formControlName","pageDescription","placeholder","Page Description","required",""],[1,"d-flex","flex-row"],["class","mr-3",4,"ngFor","ngForOf"],["for","type"],["labelForId","type","formControlName","type","name","elementType",3,"blur"],["for","selectedElement"],["labelForId","selectedElement","formControlName","selectedElement","name","selectedElement"],[1,"mr-3"],[1,"ux-selection","form-check"],["type","radio","name","isEncrypted","formControlName","isEncrypted",1,"form-check-input",3,"value"],[1,"form-check-label","p-0",3,"for"],["type","button",1,"ux-button",3,"click"],[1,"card","mt-3"],["cdkDropListGroup","",1,"element-container","col-md-6","col-lg-4","col-xl-4","col-12"],["cdkDropList","",1,"element-list",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","class","element",4,"ngFor","ngForOf"],["class","col-md-6 col-lg-4 col-xl-4 col-12",4,"ngIf"],["cdkDrag","",1,"element"],[1,"icon-group"],[1,"fa-grip",3,"icon"],[1,"fa-close",3,"icon","click"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"form",9)(10,"div",10),e._uU(11,"Create Page Version"),e.qZA(),e.TgZ(12,"div",11),e.YNc(13,b,7,2,"div",12),e.YNc(14,q,41,7,"div",13),e.TgZ(15,"div",14),e.YNc(16,S,2,0,"button",15),e.YNc(17,k,2,0,"button",15),e.TgZ(18,"p",16),e._uU(19),e.qZA()()()()()(),e.TgZ(20,"div",7)(21,"div",8),e.YNc(22,Y,9,4,"div",17),e.qZA()()()()()()()()()),2&o&&(e.xp6(9),e.Q6J("formGroup",i.pageVersionForm),e.xp6(4),e.Q6J("ngIf",!i.showAddElement),e.xp6(1),e.Q6J("ngIf",i.showAddElement),e.xp6(2),e.Q6J("ngIf",!i.showAddElement),e.xp6(1),e.Q6J("ngIf",i.showAddElement),e.xp6(2),e.Oqu(i.errorMessage),e.xp6(3),e.Q6J("ngIf",i.selectedElements.length>0&&i.pageVersionForm.value.pageName))},dependencies:[d.sg,d.O5,a._Y,a.Fj,a._,a.JJ,a.JL,a.Q7,a.sg,a.u,g.Wj,g.Fd,g.Zt,m.w9,m.jq,C.BN,d.rS],styles:[".element-container[_ngcontent-%COMP%]{max-width:100%;margin:0 25px 25px 0;display:inline-block;vertical-align:top}.element-list[_ngcontent-%COMP%]{border:solid 1px #ccc;min-height:60px;background:white;border-radius:4px;overflow:hidden;display:block}.element[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:white;font-size:14px}.element[_ngcontent-%COMP%]:last-child{border:none}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.element-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.icon-group[_ngcontent-%COMP%]   .fa-grip[_ngcontent-%COMP%]{display:block;transition:display .5s ease}.icon-group[_ngcontent-%COMP%]   .fa-close[_ngcontent-%COMP%]{cursor:pointer;display:none}.fa-close[_ngcontent-%COMP%]:before, .fa-grip[_ngcontent-%COMP%]:before{display:none}.icon-group[_ngcontent-%COMP%]:hover   .fa-grip[_ngcontent-%COMP%]{display:none}.icon-group[_ngcontent-%COMP%]:hover   .fa-close[_ngcontent-%COMP%]{display:block}"]}),s})()}];let G=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.Bz.forChild(Q),v.Bz]}),s})(),R=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.ez,G,a.u5,a.UX,g._t,m.A0,C.uH]}),s})()}}]);