"use strict";(self.webpackChunkadmin_ui=self.webpackChunkadmin_ui||[]).push([[904],{5372:(A,T,l)=>{l.r(T),l.d(T,{GenerateMasterReportModule:()=>U});var u=l(6814),d=l(5628),n=l(95),m=l(9364),e=l(4769),v=l(1521),y=l(788),R=l(2848),x=l(5627),g=l(6304);function _(t,s){1&t&&(e.TgZ(0,"p",42),e._uU(1," User Query is required! "),e.qZA())}function Z(t,s){if(1&t&&(e.TgZ(0,"div",13)(1,"div",14)(2,"label",39),e._uU(3,"User Query:"),e.TgZ(4,"span",15),e._uU(5,"*"),e.qZA()(),e._UZ(6,"input",40),e.YNc(7,_,2,0,"p",41),e.qZA()()),2&t){const o=e.oxw();let a;e.xp6(7),e.Q6J("ngIf",(null==(a=o.generateForm.get("userQuery"))?null:a.invalid)&&(null==(a=o.generateForm.get("userQuery"))?null:a.touched))}}function C(t,s){if(1&t&&(e.TgZ(0,"ng-option",47),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.Q6J("value",o.ID),e.xp6(1),e.Oqu(o.REPORTNAME)}}function b(t,s){if(1&t&&(e.TgZ(0,"div",43)(1,"div",14)(2,"label",44),e._uU(3,"Get Master Reports"),e.qZA(),e.TgZ(4,"ng-select",45),e.YNc(5,C,2,2,"ng-option",46),e.qZA()()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngForOf",o.reports)}}function M(t,s){1&t&&e._UZ(0,"div",48)}function q(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"app-datatable",49),e.NdJ("search",function(r){e.CHM(o);const i=e.oxw();return e.KtG(i.updateFilter(r))})("changeTemplate",function(r){e.CHM(o);const i=e.oxw();return e.KtG(i.applyTemplate(r))}),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("rows",o.rows)("columns",o.columns)("loadingIndicator",o.loadingIndicator)("selectedTemplateClass",o.selectedTemplateClass)}}const Q=[{path:"",component:(()=>{var t;class s{constructor(a,r,i,c,h){this.fb=a,this.httpService=r,this.constant=i,this.dataService=c,this.router=h,this.content=[],this.rows=[],this.columns=[],this.reports=[],this.message="",this.ColumnMode=m.hq,this.SortType=m.ER,this.reorderable=!0,this.loadingIndicator=!0,this.showDataTable=!1,this.selectedTemplateClass="material expanded",this.generateForm=this.fb.group({reportType:["",n.kI.required],userQuery:["",n.kI.required],dataPlainTextRequied:["Y",n.kI.required],ID:["",n.kI.required],queryType:["",n.kI.required]})}generateReport(){const a=this.generateForm.value,r=this.constant.serviceName_GETREPORTSBYFILTER,i={...this.dataService.commonInputData(),[this.constant.key_createdBy]:"1",[this.constant.key_queryType]:a.reportType,[this.constant.key_dataPlainTextRequied]:a.dataPlainTextRequied};let c={};"UserQuery"===a.reportType?c={[this.constant.key_statusId]:"3",[this.constant.key_userQuery]:a.userQuery}:"SystemQuery"===a.reportType&&(c={[this.constant.key_ID]:a.ID});const h={...i,...c};this.httpService.callApiServices(r,h).subscribe({next:p=>{this.responseData=p.responseParameter,this.message="01"==this.responseData.opstatus?p.responseParameter.Result+" Please Check Your SQL Query":p.responseParameter.Result,setTimeout(()=>this.message="",2e3),this.showDataTable="00"==p.responseParameter.opstatus,setTimeout(()=>this.loadingIndicator=!1,1e3),this.rows=p.set.records,this.content=[...this.rows],this.columns=Object.keys(this.rows[0]).map(f=>({name:f,prop:f})),console.log(this.rows),console.log(this.columns)},error:()=>this.message="Unable to fetch Data"})}fetchReports(){let a={...this.dataService.commonInputData()};this.httpService.callApiServices(this.constant.serviceName_GETALLREPORTS,a).subscribe({next:i=>{this.reports=i.set.records,console.log(this.reports)}})}applyTemplate(a){this.selectedTemplateClass=a}updateFilter(a){const r=(a||"").toLowerCase();this.rows=r?this.content.filter(i=>Object.values(i).some(c=>(c||"").toLowerCase().startsWith(r))):this.content}}return(t=s).\u0275fac=function(a){return new(a||t)(e.Y36(n.qu),e.Y36(v.c),e.Y36(y.$),e.Y36(R.D),e.Y36(d.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-generate-master-report"]],decls:58,vars:7,consts:[[1,"main","bg-m"],[1,"right-main-column"],[1,"right-col-container","pad-b","full-width"],[1,"body-page-container","main-dashborad"],[1,"container-fluid"],[1,"row","no-gutters"],[1,"col-12"],[1,"row1"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-12"],[3,"formGroup"],[1,"card","mt-3"],[1,"card-header","bg-primary","text-white"],[1,"card-body","bg-light"],[1,"col-12","col-md-12","col-lg-12","col-xl-12","mt-2"],[1,"ux-input"],[1,"mandatory"],[1,"sr-only"],[1,"ux-selection"],["type","radio","id","manualQuery","name","reportType","formControlName","reportType","value","UserQuery",1,"form-check-input"],["for","manualQuery",1,"px-1"],["type","radio","id","masterReport","name","reportType","formControlName","reportType","value","SystemQuery",1,"form-check-input",3,"change"],["for","masterReport",1,"px-1"],["class","col-12 col-md-12 col-lg-12 col-xl-12 mt-2",4,"ngIf"],["class","col-12 col-md-6 col-lg-6 col-xl-6 mt-2",4,"ngIf"],["class","col-12 col-md-12 col-lg-6 col-xl-6 mt-2",4,"ngIf"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],["for","dataPlainTextRequied"],[1,"d-flex","flex-row"],[1,"mr-3"],[1,"ux-selection","form-check"],["type","radio","id","dataRequiredYes","name","dataPlainTextRequied","formControlName","dataPlainTextRequied","value","Y",1,"form-check-input"],["for","dataRequiredYes",1,"form-check-label","p-0"],["type","radio","id","dataRequiredNo","name","dataPlainTextRequied","formControlName","dataPlainTextRequied","value","N",1,"form-check-input"],["for","dataRequiredNo",1,"form-check-label","p-0"],[1,"col-12","col-md-6","col-lg-6","col-xl-6"],["type","button",1,"ux-button","btn","btn-success",3,"click"],[1,"col-12","col-md-6","col-lg-6","col-xl-6","mt-4"],[3,"ngClass"],[3,"rows","columns","loadingIndicator","selectedTemplateClass","search","changeTemplate",4,"ngIf"],["for","userQuery"],["name","userQuery","type","text","formControlName","userQuery","placeholder","Enter SQL Query","required",""],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"col-12","col-md-6","col-lg-6","col-xl-6","mt-2"],["for","masterReports",1,"align-self-center"],["id","masterReports","formControlName","ID","name","ID"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-12","col-md-12","col-lg-6","col-xl-6","mt-2"],[3,"rows","columns","loadingIndicator","selectedTemplateClass","search","changeTemplate"]],template:function(a,r){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"form",9)(10,"div",10)(11,"div",11),e._uU(12," Generate Report "),e.qZA(),e.TgZ(13,"div",12)(14,"div",13)(15,"div",14)(16,"label"),e._uU(17,"Report Type:"),e.TgZ(18,"span",15),e._uU(19,"*"),e.qZA()(),e.TgZ(20,"fieldset")(21,"legend",16),e._uU(22,"Choose a Report Type"),e.qZA(),e.TgZ(23,"div",17),e._UZ(24,"input",18),e.TgZ(25,"label",19),e._uU(26,"Manual Query"),e.qZA()(),e.TgZ(27,"div",17)(28,"input",20),e.NdJ("change",function(){return r.fetchReports()}),e.qZA(),e.TgZ(29,"label",21),e._uU(30,"Master Report"),e.qZA()()()()(),e.YNc(31,Z,8,1,"div",22),e.YNc(32,b,6,1,"div",23),e.YNc(33,M,1,0,"div",24),e.TgZ(34,"div",25)(35,"div",14)(36,"label",26),e._uU(37,"Data in plaintext is required?"),e.TgZ(38,"span",15),e._uU(39,"*"),e.qZA()(),e.TgZ(40,"div",27)(41,"div",28)(42,"div",29),e._UZ(43,"input",30),e.TgZ(44,"label",31),e._uU(45,"Yes"),e.qZA()()(),e.TgZ(46,"div",28)(47,"div",29),e._UZ(48,"input",32),e.TgZ(49,"label",33),e._uU(50,"No"),e.qZA()()()()()(),e.TgZ(51,"div",34)(52,"button",35),e.NdJ("click",function(){return r.generateReport()}),e._uU(53," Fetch "),e.qZA()(),e.TgZ(54,"div",36)(55,"p",37),e._uU(56),e.qZA()()()()(),e.YNc(57,q,1,4,"app-datatable",38),e.qZA()()()()()()()()()),2&a&&(e.xp6(9),e.Q6J("formGroup",r.generateForm),e.xp6(22),e.Q6J("ngIf","UserQuery"===r.generateForm.value.reportType),e.xp6(1),e.Q6J("ngIf","SystemQuery"===r.generateForm.value.reportType),e.xp6(1),e.Q6J("ngIf","multiple"===r.generateForm.value.queryType),e.xp6(22),e.Q6J("ngClass","01"===(null==r.responseData?null:r.responseData.opstatus)?"text-danger":"text-success"),e.xp6(1),e.hij(" ",r.message," "),e.xp6(1),e.Q6J("ngIf",r.showDataTable))},dependencies:[u.mk,u.sg,u.O5,n._Y,n.Fj,n._,n.JJ,n.JL,n.Q7,n.sg,n.u,x.n,g.w9,g.jq],styles:["ngx-datatable[_ngcontent-%COMP%]{height:25rem}"]}),s})()}];let G=(()=>{var t;class s{}return(t=s).\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(Q),d.Bz]}),s})();var I=l(9591);let U=(()=>{var t;class s{}return(t=s).\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,G,n.u5,n.UX,m.xD,I.x,g.A0]}),s})()}}]);